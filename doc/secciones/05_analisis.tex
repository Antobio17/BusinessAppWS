\chapter{Análisis del problema}

\section{Implicados}

En esta sección vamos a centrarnos en los implicados del problema a resolver ya que estos serán los usuarios finales de
la aplicación. Definiremos a continuación los distintos tipos de usuario:

\subsection{Tipos de usuario}

Los usuarios de la aplicación a desarrollar son:

\begin{itemize}
    \item Super-Administrador. Su función es gestionar la totalidad del aplicativo, teniendo acceso total a los datos
    almacenados por cada uno de los negocios. Podrá monitorizar el correcto funcionamiento de la aplicación y realizar
    correcciones o registrar incidencias si es necesario.

    \item Administrador. Su función es gestionar los datos de un negocio. En este caso existiría un usuario
    administrador por negocio y este tendrá acceso a los datos del mismo. Si detecta posibles errores también
    podrá registrar incidencias.

    \item Usuarios. Podrán consultar y reservar citas, así realizar pedidos en la tienda online.
    Además tendrán acceso a todos su datos como histórico de citas o histórico de pedidos.
\end{itemize}

\subsection{Resumen de implicados}

\begin{table}[H]
\begin{tabular}{|c|l|c|l|}
\hline
\textbf{Nombre} & \multicolumn{1}{c|}{\textbf{Descripción}} & \textbf{Tipo} & \multicolumn{1}{c|}{\textbf{Responsabilidad}} \\ \hline
Super-Administrador & \begin{tabular}[c]{@{}l@{}}Administrador \\ del sistema\end{tabular} & \begin{tabular}[c]{@{}c@{}}Usuario\\ producto\end{tabular} & \begin{tabular}[c]{@{}l@{}}Gestionar el sistema, moniro- \\ rizar sistema, gestionar inci- \\ dencias.\end{tabular} \\ \hline
Administrador & \begin{tabular}[c]{@{}l@{}}Administrador \\ del negocio\end{tabular} & \begin{tabular}[c]{@{}c@{}}Usuario\\ producto\end{tabular} & \begin{tabular}[c]{@{}l@{}}Gestionar el negocio, modificar \\ datos del negocio (citas, \\ productos,...), registrar \\ incidencias.\end{tabular} \\ \hline
Usuario & \begin{tabular}[c]{@{}l@{}}Cliente que \\ usa el sistema \\ de manera \\ convencional.\end{tabular} & \begin{tabular}[c]{@{}c@{}}Usuario\\ producto\end{tabular} & \begin{tabular}[c]{@{}l@{}}Reservar/modificar/cancelar \\ citas, realizar pedidos, \\ gestionar perfil de usuario.\end{tabular} \\ \hline
\end{tabular}
\caption{Resumen de implicados}
\end{table}

\subsection{Perfiles de los implicados}

\textbf{Administrador}

\begin{table}[H]
\begin{tabular}{|l|l|}
\hline
\textbf{Representante} & Nombre Apellidos \\ \hline
\textbf{Descripción} & Super-Administrador \\ \hline
\textbf{Tipo} & \begin{tabular}[c]{@{}l@{}}
Encargado del sistema completo, con responsabilidades\\ de gestión sobre el mismo.
\end{tabular} \\ \hline
\textbf{Responsabilidades} & \begin{tabular}[c]{@{}l@{}}
Gestionar el sistema correctamente: supervisar\\ los errores que puedan surgir en el aplicativo y controlar\\
el funcionamiento.
\end{tabular} \\ \hline
\textbf{Criterios de éxito} & \begin{tabular}[c]{@{}l@{}}
Que el sistema funcione adecuadamente con los pará-\\ metros óptimos y no exista información incorrecta.
\end{tabular} \\ \hline
\textbf{Implicación} &
Total, pues es el encargado principal del sistema. \\ \hline
\end{tabular}
\caption{Perfil de implicado: Super-Administrador}
\end{table}

\textbf{Trabajador}

\begin{table}[H]
\begin{tabular}{|l|l|}
\hline
\textbf{Representante} & Nombre Apellidos \\ \hline
\textbf{Descripción} & Administrador de negocio \\ \hline
\textbf{Tipo} & \begin{tabular}[c]{@{}l@{}}
Encargado del negocio al que pertenece, \\
con responsabilidades de gestión sobre el mismo.
\end{tabular} \\ \hline
\textbf{Responsabilidades} & \begin{tabular}[c]{@{}l@{}}
Gestionar su negocio: supervisar\\ y controlar los datos referentes a su negocio\\ para que no aparezcan incongruencias.
\end{tabular} \\ \hline
\textbf{Criterios de éxito} & \begin{tabular}[c]{@{}l@{}}
Que no se detecten errores en los datos almacenados.
\end{tabular} \\ \hline
\textbf{Implicación} &
Total a nivel de negocio. \\ \hline
\end{tabular}
\caption{Perfil de implicado: Trabajador}
\end{table}

\textbf{Cliente}

\begin{table}[H]
\begin{tabular}{|l|l|}
\hline
\textbf{Representante} & Nombre Apellidos \\ \hline
\textbf{Descripción} & Cliente de un negocio \\ \hline
\textbf{Tipo} & \begin{tabular}[c]{@{}l@{}}
Hace uso del aplicativo\\ Front-End sin tener\\ conocimiento inicial de uso.
\end{tabular} \\ \hline
\textbf{Responsabilidades} & \begin{tabular}[c]{@{}l@{}}
Crear su cuenta de usuario.\\
Reservar citas.\\
Realizar pedidos.\\
Gestionar su perfil de usuario.\\
\end{tabular} \\ \hline
\textbf{Criterios de éxito} & \begin{tabular}[c]{@{}l@{}}
Poder realizar sus\\ responsabilidades sin errores\\ y de forma sencilla.
\end{tabular} \\ \hline
\textbf{Implicación} &
Total a nivel de negocio. Sin clientes no hay negocio.\\ \hline
\end{tabular}
\caption{Perfil de implicado: Cliente}
\end{table}

\section{Especificación de requisitos}

\subsection{Requisitos funcionales}

Desarrollaremos aquí los requisitos funcionales para la definición de funcionalidades del sistema de software.

\begin{enumerate}[leftmargin=1.75cm,start=1,label={\bfseries RF-\arabic*.}]
\setlength\itemsep{1em} % Aumenta el interlineado entre ítems
    \item \textbf{Gestión de super-administradores.} Se permitirá el alta/baja con el rol de super-administrador del
    sistema. Podrá acceder a todos los datos almacenados en este.
    \begin{enumerate}[start=1,label={\bfseries RF-1.\arabic*.}]
        \item \textbf{Alta de super-administrador.} Se dará de alta a cada super-administrador con sus datos personales.
        \item \textbf{Baja de super-administrador.} Se dará de baja al super-administrador y la información relativa a
        él será eliminada.
        \item \textbf{Consultar datos del sistema.} Se podrán consultar todos los datos almacenados en el sistema.
        \item \textbf{Modificar datos del sistema.} Se podrán modificar todos los datos almacenados en el sistema.
    \end{enumerate}

    \item \textbf{Gestión de trabajadores.} Se permitirá el alta/baja con el rol de trabajador de negocio,
    así como consultar y modificar sus datos. También podrá acceder a los datos de los clientes dados de alta
    en el mismo negocio.
    \begin{enumerate}[start=1,label={\bfseries RF-2.\arabic*.}]
        \item \textbf{Alta de trabajador.} Se dará de alta a cada trabajador con sus datos personales.
        \item \textbf{Baja de trabajador.} Se dará de baja al trabajador y la información relativa a él será eliminada.
        \item \textbf{Consultar datos de trabajador.} Se podrá consultar los datos relativos a un determinado
        trabajador (datos personales, citas asignadas, etc.).
        \item \textbf{Modificar datos de trabajador.} Se podrán modificar modificar los datos personales de un
        trabajador.
        \item \textbf{Consultar citas de trabajador.} Se podrá consultar los citas previas asignadas al trabajador.
    \end{enumerate}

    \item \textbf{Gestión de clientes.} Se permitirá el alta/baja con el rol de usuario del negocio,
    así como consultar y modificar sus datos.
    \begin{enumerate}[start=1,label={\bfseries RF-3.\arabic*.}]
        \item \textbf{Alta de cliente.} Un cliente potencial se podrá dar de alta en un negocio determinado.
        \item \textbf{Baja de cliente.} Un cliente se podrá dar de baja de un negocio determinado.
        \item \textbf{Consultar datos de cliente.} Un cliente podrá consultar sus datos de un respectivo negocio.
        \item \textbf{Modificar datos de cliente.} Un cliente podrá modificar sus datos personales con los que se ha
        registrado en un negocio.
        \item \textbf{Consultar citas de trabajador.} Un cliente podrá consultar su historial de citas previas
        reservadas.
    \end{enumerate}

    \item \textbf{Gestión de citas previas.} Se permitirá realizar reservas o cancelaciones de citas previas así como
    acceder a un histórico de estas según el tipo de usuario.
    \begin{enumerate}[start=1,label={\bfseries RF-4.\arabic*.}]
        \item \textbf{Reserva de cita previa por cliente.} Una cita previa podrá ser reservada por un cliente siempre
        que la fecha sea válida y haya trabajadores disponibles en el negocio.
        \item \textbf{Cancelación de cita previa por cliente.} Una cita previa podrá ser cancelada por un cliente
        siempre que esté pendiente.
        \item \textbf{Reserva de cita previa por trabajador.} Una cita previa podrá ser reservada por un trabajador
        siempre que la fecha sea válida, el trabajador pueda atenderla y el cliente no tenga una cita ya pendiente.
        \item \textbf{Cancelación de cita previa por cliente.} Una cita previa podrá ser cancelada por un trabajador
        siempre que la cita a cancelar esté asignada a él y esté en estado pendiente.\\
    \end{enumerate}

\end{enumerate}

\subsection{Requisitos de información}

Requisitos de información, describen la información que debe almacenar y gestionar el sistema para dar soporte a los
procesos de negocio.

\begin{enumerate}[leftmargin=1.6cm,start=1,label={\bfseries RI-\arabic*.}]
\setlength\itemsep{1em} % Aumenta el interlineado entre ítems
    \item \textbf{Administrador}
    \\\textbf{Contenido:} email, nombre, apellidos, contraseña, número de teléfono y fecha de creación.
	\\\textbf{Requisitos asociados:} RF-1

	\item \textbf{Trabajador}
    \\\textbf{Contenido:} email, nombre, apellidos, contraseña, número de teléfono y fecha de creación.
    \\\textbf{Requisitos asociados:} RF-2.1, RF-2.2, RF-2.3, RF-2.4

    \item \textbf{Cliente}
    \\\textbf{Contenido:} email, nombre, apellidos, contraseña, número de teléfono y fecha de creación.
    \\\textbf{Requisitos asociados:} RF-3.1, RF-3.2, RF-3.3, RF-3.4

    \item \textbf{Citas}
    \\\textbf{Contenido:} trabajador, cliente, fecha de reserva.
    \\\textbf{Requisitos asociados:} RF-4, RF-2.5, RF-3.5\\
\end{enumerate}

\subsection{Restricciones semánticas}

Restricciones aplicadas a los requisitos funcionales y a los requisitos de información
para su correcto uso y almacenamiento.

\begin{enumerate}[leftmargin=1.75cm,start=1,label={\bfseries RS-\arabic*.}]
\setlength\itemsep{1em} % Aumenta el interlineado entre ítems

    \item \textbf{Alta super-administrador.} En el formulario de alta de super-administrador deberá comprobarse:
    \begin{enumerate}[start=1,label={\bfseries RS-1.\arabic*.}]
        \item \textbf{Email:} debe tener un formato válido.
        \item \textbf{Nombre:} no puede ser nulo o estar vacío.
        \item \textbf{Apellidos:} no puede ser nulo o estar vacío.
        \item \textbf{Número de teléfono:} debe ser un número válido.
        \item \textbf{Contraseña:} alfanumérica de más de 8 caracteres
    \end{enumerate}

    \item \textbf{Alta de trabajador.} En el formulario de alta de trabajador deberá comprobarse:
    \begin{enumerate}[start=1,label={\bfseries RS-1.\arabic*.}]
        \item \textbf{Email:} debe tener un formato válido.
        \item \textbf{Nombre:} no puede ser nulo o estar vacío.
        \item \textbf{Apellidos:} no puede ser nulo o estar vacío.
        \item \textbf{Número de teléfono:} debe ser un número válido.
        \item \textbf{Contraseña:} alfanumérica de más de 8 caracteres
    \end{enumerate}

    \item \textbf{Alta de cliente.} En el formulario de alta de cliente deberá comprobarse:
    \begin{enumerate}[start=1,label={\bfseries RS-1.\arabic*.}]
        \item \textbf{Email:} debe tener un formato válido.
        \item \textbf{Nombre:} no puede ser nulo o estar vacío.
        \item \textbf{Apellidos:} no puede ser nulo o estar vacío.
        \item \textbf{Número de teléfono:} debe ser un número válido.
        \item \textbf{Contraseña:} alfanumérica de más de 8 caracteres
    \end{enumerate}

    \item \textbf{Reserva de cita previa por cliente.} Habrá varias restricciones para realizar la reserva de citas
    \begin{enumerate}[start=1,label={\bfseries RS-4.\arabic*.}]
        \item \textbf{Fecha válida:} la fecha está en horario de trabajo.
        \item \textbf{Trabajador disponible:} hay un trabajador disponible para atender la cita a la fecha indicada.
        \item \textbf{No existen citas pendientes:} el cliente no tiene ya una cita previa pendiente.
    \end{enumerate}

    \item \textbf{Reserva de cita previa por trabajador.} Habrá varias restricciones para realizar la reserva de citas
    \begin{enumerate}[start=1,label={\bfseries RS-4.\arabic*.}]
        \item \textbf{Fecha válida:} la fecha está en horario de trabajo.
        \item \textbf{Trabajador disponible:} el trabajador debe estar disponible para atender la cita.
        \item \textbf{Cliente:} deberá indicarse un cliente existente para la cita.
        \item \textbf{No existen citas pendientes:} el cliente no tiene ya una cita previa pendiente.
    \end{enumerate}
\end{enumerate}

\subsection{Requisitos No Funcionales}

\section{Modelo de casos de uso}

\section{Diagramas de casos de uso}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.9\textwidth]{images/Gestion_Usuarios.png}
    \caption{Diagrama de caso de uso - Gestión de usuarios}
    \label{CU1}
\end{figure}


